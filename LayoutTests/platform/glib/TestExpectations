# These are the layout test expectations for the glib-based ports: WebKitGTK and WPE.
#
# This file is used to track common expectations to both ports.
#
# The bots of WebKitGTK+/WPE running layout tests (GTK Release Test, GTK Debug Test,
# GTK Release Wayland Test, WPE Release Test, and WPE Debug Test)
# are currently running on Debian 10 (Buster) x86_64.
#
# See http://trac.webkit.org/wiki/TestExpectations for more information on this file.
#
# Never add any tests to this file without opening a bug on bugzilla.webkit.org.

#//////////////////////////////////////////////////////////////////////////////////////////
# Platform-specific directories.
#//////////////////////////////////////////////////////////////////////////////////////////

#//////////////////////////////////////////////////////////////////////////////////////////
# End platform-specific directories.
#//////////////////////////////////////////////////////////////////////////////////////////

# This list is divided into several sections to make it easy for us to triage and close issues.
# 1. TESTS THAT REQUIRE NEW RESULTS
# Please don't add any tests to this list. Instead just ping a WebKitGTK/WPE developer
# to generate results for you.
#
# 2. EXPECTED FAILURES
# This list is divided into two parts:
# a. Tests that we never expect to pass, because they use features we likely
#    will never implement (Mac-only features, for instance).
# b. Missing WebCore/WebKit features that we'll want someday.
#
# 3. TESTS CRASHING
# Please open a bug for each test crashing with any important information.
# These are in a separate section than failing tests, because they should be
# priority fixes.
#
# 4. FLAKY TESTS
# Tests that sometimes pass.
#
# 5. SLOW TESTS
# These tests are assigned the SLOW modifier to prevent them timing out as they
# otherwise pass, but take a long time to complete due to the nature of test,
# debug configuration or some other performance-affecting factor.
#
# 6. TESTS TIMING OUT
# Please open a bug for each test timing out with any important information.
#
# 7. TESTS WITH ARCHITECTURE-SPECIFIC RESULTS
# Tests with different results (of which at least one is failure) on 32-bit and 64-bit builders.
# These tests are essentially marked as flaky, but are noted as failing only on specific architecture.
#
# 8. WEBKIT2 REGRESSIONS
# Tests that are now failing because of the switch to WebKit2, probably misssing some
# test harness support.
#
# 9. TESTS FAILING
# Each test should (eventually) have a bug. Missing test harness features also go here.
#
# 10. TESTS PASSING
# Tests that pass for GTK/WPE but have different expectations in the global expectations file.
#
# 11. THREADED COMPOSITOR FAILURES
# Tests that are now failing because of the switch to ThreadedCompositor.

#////////////////////////////////////////////////////////////////////////////////////////
# 1. TESTS THAT REQUIRE NEW RESULTS
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# End of Tests Requiring New Results
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 2. EXPECTED FAILURES
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211995 fast/images/animated-image-mp4.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of Expected Failures
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# 3. TESTS CRASHING
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211942 webgl/1.0.3/conformance/more/functions/copyTexImage2DBadArgs.html [ Crash ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of Crashing tests
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 4. FLAKY TESTS
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/211692 imported/w3c/web-platform-tests/xhr/event-timeout-order.any.worker.html [ Failure Pass ]

webkit.org/b/211837 perf/rel-list-remove.html [ Failure Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of Flaky Tests
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 5. SLOW TESTS
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/79203 fast/mediastream/RTCPeerConnection-iceconnectionstatechange-event.html [ Failure Timeout Pass ]
webkit.org/b/79203  fast/mediastream/RTCRtpSender-replaceTrack.html [ Failure Crash ]
webkit.org/b/187603 fast/mediastream/media-stream-track-source-failure.html [ Timeout Failure Pass ]
webkit.org/b/191886 webkit.org/b/210800 fast/mediastream/MediaStream-video-element-remove-track.html [ Failure Crash ]
webkit.org/b/199440 fast/mediastream/mediastreamtrack-video-clone.html [ Crash Pass ]
webkit.org/b/210337 fast/mediastream/mediastreamtrack-audio-clone.html [ Failure Pass ]
webkit.org/b/210385 fast/mediastream/stream-switch.html [ Crash Timeout ]
webkit.org/b/210385 fast/mediastream/getUserMedia-default.html [ Crash Pass ]
webkit.org/b/210528 fast/mediastream/MediaStream-MediaElement-setObject-null.html [ Crash Pass ]
webkit.org/b/210528 fast/mediastream/mediastreamtrack-video-frameRate-clone-decreasing.html [ Crash Pass ]
webkit.org/b/213011 fast/mediastream/media-stream-track-interrupted.html [ Failure ]
webkit.org/b/210498 webkit.org/b/210840 fast/mediastream/play-newly-added-audio-track.html  [ Failure Crash ]

webkit.org/b/203078 media/media-source/media-source-remove-unload-crash.html [ Crash Timeout Pass ]
webkit.org/b/210528 media/media-source/media-source-seek-back.html [ Crash Pass ]

webkit.org/b/210528 media/video-src-blob-replay.html [ Crash Pass ]

webkit.org/b/211995 fast/images/animated-image-mp4.html [ Failure ]
webkit.org/b/213947 media/vp9.html [ Failure ]

webkit.org/b/214038 imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/track/track-element/track-cues-cuechange.html [ Missing Failure ]

webkit.org/b/214031 imported/w3c/web-platform-tests/html/semantics/embedded-content/the-video-element/video-poster-shown-preload-auto.html [ ImageOnlyFailure ]

webkit.org/b/207547 media/media-can-play-av1.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of slow tests
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 6. TESTS TIMING OUT
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/212020 webanimations/accelerated-animation-single-keyframe.html [ Skip ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of Tests timing out
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 7. TESTS WITH ARCHITECTURE-SPECIFIC RESULTS
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# End of tests with architecture-specific results
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 8. WEBKIT2 REGRESSIONS
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# End of WebKit2-related regressions
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 9. TESTS FAILING
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/152908 pageoverlay/overlay-installation.html [ Failure ]
webkit.org/b/152908 pageoverlay/overlay-large-document-scrolled.html [ Failure ]
webkit.org/b/152908 pageoverlay/overlay-large-document.html [ Failure ]
webkit.org/b/152908 pageoverlay/overlay-small-frame-paints.html [ Pass Failure ]
webkit.org/b/168501 pageoverlay/overlay-remove-reinsert-view.html [ Failure ]

webkit.org/b/211770 webaudio/codec-tests/aac/vbr-128kbps-44khz.html [ Failure ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of non-crashing, non-flaky tests failing
#////////////////////////////////////////////////////////////////////////////////////////

# LEGACY_ENCRYPTED_MEDIA is deprecated
webkit.org/b/189345 http/tests/media/clearkey/collect-webkit-media-session.html [ Skip ]
fast/events/webkit-media-key-events-constructor.html [ Skip ]

media/encrypted-media [ Pass ]
media/encrypted-media/clearKey/clearKey-cenc-video-playback-mse-multikey.html [ Skip ]
webkit.org/b/205857 media/encrypted-media/mock-MediaKeySession-generateRequest.html [ Skip ]
webkit.org/b/205857 media/encrypted-media/mock-navigator-requestMediaKeySystemAccess.html [ Skip ]
webkit.org/b/205860 media/encrypted-media/mock-MediaKeySession-remove.html [ Skip ]

webkit.org/b/190578 media/encrypted-media/mock-MediaKeySystemAccess.html [ Skip ]

webkit.org/b/210390 media/encrypted-media/clearKey/clearKey-webm-video-playback-mse.html [ Pass Crash ]
webkit.org/b/210390 media/encrypted-media/clearKey/clearKey-session-life-cycle.html [ Crash Pass ]

webkit.org/b/190991 media/encrypted-media/encrypted-media-constants.html [ Failure ]
webkit.org/b/190991 media/encrypted-media/encrypted-media-is-type-supported.html [ Failure ]
webkit.org/b/190991 media/encrypted-media/encrypted-media-session-lifetime.html [ Timeout ]
# Encrypted WebM is not supported yet.
webkit.org/b/189196 media/encrypted-media/clearKey/clearKey-encrypted-webm-event-mse.html [ Skip ]

# Web platform tests
# Disable and selectively pass, since half the tests require a real DRM system.
webkit.org/b/190991 imported/w3c/web-platform-tests/encrypted-media/ [ Skip ]
webkit.org/b/211840 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-retrieve-persistent-license.https.html [ Crash Pass Failure ]
webkit.org/b/211840 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-destroy-persistent-license.https.html [ Failure ]
webkit.org/b/190991 imported/w3c/web-platform-tests/encrypted-media/clearkey-check-status-for-hdcp.https.html [ Failure ]
webkit.org/b/211375 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-clear-encrypted-segmented.https.html [ Skip ]
webkit.org/b/210113 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-reset-src-after-setmediakeys.https.html [ Failure Pass ]
webkit.org/b/210390 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-again-after-resetting-src.https.html [ Crash Pass ]
webkit.org/b/210264 imported/w3c/web-platform-tests/encrypted-media/clearkey-events-session-closed-event.https.html [ Failure Pass ]
webkit.org/b/210965 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential-readyState.https.html [ Failure ]
webkit.org/b/210966 imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-again-after-playback.https.html [ Crash Pass ]
webkit.org/b/178707 imported/w3c/web-platform-tests/encrypted-media/encrypted-media-default-feature-policy.https.sub.html [ Skip ]

imported/w3c/web-platform-tests/encrypted-media/clearkey-check-encryption-scheme.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-check-initdata-type.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-events.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-invalid-license.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-keystatuses.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-keystatuses-multiple-sessions.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-clear-encrypted.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear-sources.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-events.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multisession.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-src.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-update.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-onencrypted.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-two-videos.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-requestmediakeysystemaccess.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-at-same-time.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-multiple-times-with-different-mediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-multiple-times-with-the-same-mediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-to-multiple-video-elements.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeysession.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeys.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeysystemaccess.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-unique-origin.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-update-disallowed-input.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-waiting-for-a-key.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-not-callable-after-createsession.https.html [ Pass ]
imported/w3c/web-platform-tests/encrypted-media/clearkey-update-non-ascii-input.https.html [ Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of EME feature
#////////////////////////////////////////////////////////////////////////////////////////


#////////////////////////////////////////////////////////////////////////////////////////
# TESTS PASSING
#////////////////////////////////////////////////////////////////////////////////////////

animations/missing-values-first-keyframe.html [ Pass ]
animations/missing-values-last-keyframe.html [ Pass ]

# RSA-PSS tests are for now skipped on all ports, so we for now explicitly enable the passing ones here.
crypto/subtle/ecdh-import-pkcs8-key-p256-validate-ecprivatekey-parameters-publickey.html [ Pass ]
crypto/subtle/ecdh-import-pkcs8-key-p384-validate-ecprivatekey-parameters-publickey.html [ Pass ]
crypto/subtle/ecdsa-import-pkcs8-key-p256-validate-ecprivatekey-parameters-publickey.html [ Pass ]
crypto/subtle/ecdsa-import-pkcs8-key-p384-validate-ecprivatekey-parameters-publickey.html [ Pass ]
crypto/subtle/ecdh-import-spki-key-ecdh-identifier.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-jwk-sha1.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-jwk-sha224.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-jwk-sha256.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-jwk-sha384.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-jwk-sha512.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-pkcs8.html [ Pass ]
crypto/subtle/rsa-pss-generate-export-key-spki.html [ Pass ]
crypto/subtle/rsa-pss-generate-key.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-private-key.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-public-key-empty-usages.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-public-key-sha1.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-public-key-sha224.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-public-key-sha256.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-public-key-sha384.html [ Pass ]
crypto/subtle/rsa-pss-import-jwk-public-key-sha512.html [ Pass ]
crypto/subtle/rsa-pss-import-key-sign-large-salt.html [ Failure ]
crypto/subtle/rsa-pss-import-key-sign.html [ Pass ]
crypto/subtle/rsa-pss-import-key-verify.html [ Pass ]
crypto/subtle/rsa-pss-import-pkcs8-key.html [ Pass ]
crypto/subtle/rsa-pss-import-spki-key-empty-usages.html [ Pass ]
crypto/subtle/rsa-pss-import-spki-key.html [ Pass ]
crypto/workers/subtle/rsa-pss-import-key-sign.html [ Pass ]
crypto/workers/subtle/rsa-pss-import-key-verify.html [ Pass ]
http/wpt/crypto/rsa-pss-crash.any.html [ Pass ]
http/wpt/crypto/rsa-pss-crash.any.worker.html [ Pass ]


fast/text/emoji-gender-2-3.html [ Pass ]
fast/text/emoji-gender-2-4.html [ Pass ]
fast/text/emoji-gender-2-5.html [ Pass ]
fast/text/emoji-gender-2-6.html [ Pass ]
fast/text/emoji-gender-2-7.html [ Pass ]
fast/text/emoji-gender-2-8.html [ Pass ]
fast/text/emoji-gender-2-9.html [ Pass ]
fast/text/emoji-gender-3.html [ Pass ]
fast/text/emoji-gender-4.html [ Pass ]
fast/text/emoji-gender-5.html [ Pass ]
fast/text/emoji-gender-6.html [ Pass ]
fast/text/emoji-gender-8.html [ Pass ]
fast/text/emoji-gender-9.html [ Pass ]
fast/text/emoji-gender-fe0f-3.html [ Pass ]
fast/text/emoji-gender-fe0f-4.html [ Pass ]
fast/text/emoji-gender-fe0f-5.html [ Pass ]
fast/text/emoji-gender-fe0f-6.html [ Pass ]
fast/text/emoji-gender-fe0f-7.html [ Pass ]
fast/text/emoji-gender-fe0f-8.html [ Pass ]
fast/text/emoji-gender-fe0f-9.html [ Pass ]
fast/text/emoji-gender.html [ Pass ]

# Some Apple ports don't support RTL scrollbars.
fast/scrolling/rtl-scrollbars-elementFromPoint-static.html [ Pass ]
fast/scrolling/rtl-scrollbars-iframe-offset.html [ Pass ]
fast/scrolling/rtl-scrollbars-listbox-select-left.html [ Pass ]
fast/scrolling/rtl-scrollbars-listbox-select-right.html [ Pass ]
fast/scrolling/rtl-scrollbars-listbox-simple.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-dir-rtl.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-elementFromPoint.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-padding.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-position-absolute.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow-simple.html [ Pass ]
fast/scrolling/rtl-scrollbars-overflow.html [ Pass ]
fast/scrolling/rtl-scrollbars-positioned-intersect-scrollbars.html [ Pass ]
fast/scrolling/rtl-scrollbars-positioning.html [ Pass ]
fast/scrolling/rtl-scrollbars-simple.html [ Pass ]
fast/scrolling/rtl-scrollbars.html [ Pass ]

webkit.org/b/172056 fast/text/multiglyph-characters.html [ Pass ]

imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property.html [ DumpJSConsoleLogInStdErr ]

imported/w3c/web-platform-tests/css/css-text/hyphens/hyphens-auto-001.html [ Pass ]

imported/w3c/web-platform-tests/html/canvas/element/imagebitmap/createImageBitmap-serializable.html [ DumpJSConsoleLogInStdErr ]

#////////////////////////////////////////////////////////////////////////////////////////
# 10. TESTS PASSING
#////////////////////////////////////////////////////////////////////////////////////////

webkit.org/b/212054 imported/w3c/web-platform-tests/css/css-flexbox/flex-lines/multi-line-wrap-reverse-column-reverse.html [ Pass ]

#////////////////////////////////////////////////////////////////////////////////////////
# End of PASSING tests. See top of file where to put new expectations.
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# 11. THREADED COMPOSITOR FAILURES
#////////////////////////////////////////////////////////////////////////////////////////

#////////////////////////////////////////////////////////////////////////////////////////
# End of tests failing due to THREADED COMPOSITOR enablement. Don't put random test
# failures here. See the top of the file for where to put new expectations.
#////////////////////////////////////////////////////////////////////////////////////////
