#!/usr/bin/env bash

# If the package $1 is available, prints it. Otherwise prints $2.
# Useful for handling when a package is renamed on new versions of Debian/Ubuntu.
function aptIfElse {
    if apt-cache show $1 &>/dev/null; then
        echo $1
    else
        echo $2
    fi
}

PACKAGES=(
	# These are dependencies necessary for building WebKitGTK.
	autoconf
	automake
	autopoint
	autotools-dev
	bubblewrap
	cmake
	gawk
	geoclue-2.0
	gnome-common
	gperf
	gtk-doc-tools
	intltool
	itstool
	libasound2-dev
	libatk1.0-dev
	libedit-dev
	libenchant-dev
	libevent-dev
	libfaad-dev
	libffi-dev
	libfile-copy-recursive-perl
	$(aptIfElse libgcrypt20-dev libgcrypt11-dev)
	libgirepository1.0-dev
	libgl1-mesa-dev
	libgl1-mesa-glx
	libgstreamer1.0-dev
	libgstreamer-plugins-bad1.0-dev
	libgstreamer-plugins-base1.0-dev
	libgtk-3-dev
	libgudev-1.0-dev
	libhyphen-dev
	libjpeg-dev
	libkate-dev
	libmount-dev
	libmpg123-dev
	libnotify-dev
	libopenjp2-7-dev
	libopus-dev
	libpango1.0-dev
	libpng-dev
	libpulse-dev
	librsvg2-dev
	libseccomp-dev
	libsecret-1-dev
	libsoup2.4-dev
	libsqlite3-dev
	libsrtp2-dev
	libsystemd-dev
	libtasn1-6-dev
	libtheora-dev
	libtool
	libupower-glib-dev
	libvorbis-dev
	libvpx-dev
	libwayland-dev
	libwebp-dev
	libwoff-dev
	libxcomposite-dev
	libxslt1-dev
	libxt-dev
	libxtst-dev
	nasm
	ninja-build
	patch
	ruby
	xfonts-utils

	# These are dependencies necessary for running tests.
	apache2
	cups-daemon
	curl
	dbus-x11
	fonts-liberation
	gdb
	hunspell
	hunspell-en-gb
	hunspell-en-us
	libcgi-pm-perl
	libgpg-error-dev
	psmisc
	pulseaudio-utils
	python-gi
	python-psutil
	python-yaml
	ruby
	ruby-highline
	ruby-json
	weston
	xvfb

	# These are dependencies necessary for building with the Flatpak SDK.
	flatpak

	# These are dependencies necessary for building the jhbuild.
	bison
	flex
	git
	gobject-introspection
	gsettings-desktop-schemas-dev
	gyp
	icon-naming-utils
	libcroco3-dev
	libcups2-dev
	libdrm-dev
	libegl1-mesa-dev
	libepoxy-dev
	libevdev-dev
	libexpat1-dev
	libfdk-aac-dev
	libgbm-dev
	libgles2-mesa-dev
	libgnutls28-dev
	libgpg-error-dev
	libinput-dev
	libjson-glib-dev
	libmtdev-dev
	liborc-0.4-dev
	libp11-kit-dev
	libpciaccess-dev
	libproxy-dev
	libpsl-dev
	libssl-dev
	libtiff5-dev
	libtool-bin
	libudev-dev
	libunistring-dev
	libv4l-dev
	libxcb-composite0-dev
	libxcb-xfixes0-dev
	libxfont2
	libxfont-dev
	libxkbcommon-x11-dev
	libxkbfile-dev
	libxml-libxml-perl
	python3-setuptools
	python-dev
	ragel
	uuid-dev
	x11proto-bigreqs-dev
	x11proto-composite-dev
	x11proto-gl-dev
	x11proto-input-dev
	x11proto-randr-dev
	x11proto-resource-dev
	x11proto-scrnsaver-dev
	x11proto-video-dev
	x11proto-xcmisc-dev
	x11proto-xf86dri-dev
	xfonts-utils
	xtrans-dev
	xutils-dev
	yasm

	# These are dependencies necessary for using webkit-patch.
	git-svn
	subversion

	# These are GStreamer plugins needed to play different media files.
	gstreamer1.0-gl
	gstreamer1.0-libav
	gstreamer1.0-plugins-bad
	gstreamer1.0-plugins-base
	gstreamer1.0-plugins-good
	gstreamer1.0-plugins-ugly
	gstreamer1.0-pulseaudio
)
